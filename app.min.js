#!/usr/bin/env nodejs
function onListening(){debug("Servidor Express escuchando localmente en el puerto "+server.address().port),volt.ejecutar()}var express=require("express"),bodyParser=require("body-parser"),cookieParser=require("cookie-parser"),debug=require("debug")("Gesco-DatabaseManagement:server"),favicon=require("serve-favicon"),http=require("http"),logger=require("morgan"),path=require("path");global.appRoot=path.resolve(__dirname);var volt=require(__dirname+"/lib/volt"),index=require(__dirname+"/routes/index"),graficos=require(__dirname+"/routes/graficos"),informes=require(__dirname+"/routes/informes"),app=express();app.set("port",process.env.PORT||3e3),app.set("ip",process.env.IP||"127.0.0.1"),app.set("views",path.join(__dirname,"views")),app.set("view engine","jade"),app.use(favicon(__dirname+"/public/images/favicon.ico")),app.use(logger("dev")),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express["static"](path.join(__dirname,"public"))),app.use("/",index),app.use("/graficos",graficos),app.use("/informes",informes),app.use(function(e,r,s){var o=new Error("No encontrado.");o.status=404,s(o)}),app.use(function(e,r,s,o){s.status(e.status),s.render("error",{message:e.message,error:e})});var server=http.createServer(app);server.listen(app.get("port")),server.on("listening",onListening),module.exports=app;var express=require("express"),router=express.Router();router.get("/",function(e,r){r.render("graficos",{title:"Gesco-DatabaseManagement: Graficos"})}),module.exports=router;var express=require("express"),router=express.Router();router.get("/",function(e,r){r.render("index",{title:"Gesco-DatabaseManagement: Inicio"})}),module.exports=router;var express=require("express"),router=express.Router(),pdf=require(appRoot+"/lib/informe");pdf.generar(),router.get("/",function(e,r){r.render("informes",{title:"Gesco-DatabaseManagement: Informes"})}),module.exports=router;